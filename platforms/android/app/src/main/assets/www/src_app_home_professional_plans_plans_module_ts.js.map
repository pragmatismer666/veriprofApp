{"version":3,"file":"src_app_home_professional_plans_plans_module_ts.js","mappings":"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","sources":["./src/app/home/professional/plans/plans.module.ts","./src/app/home/professional/plans/plans.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PlansPage } from './plans.page';\n\nconst routes: Routes = [\n    {\n        path: '',\n        component: PlansPage\n    }\n];\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        IonicModule,\n        RouterModule.forChild(routes)\n    ],\n    declarations: [PlansPage]\n})\nexport class PlansPageModule { }\n","import { Component, OnInit } from \"@angular/core\";\nimport { ToastController } from \"@ionic/angular\";\nimport { RestApiService } from \"src/app/services/rest-api.service\";\nimport { AuthenticateService } from \"src/app/services/authentication.service\";\n\n@Component({\n    selector: \"app-plans\",\n    templateUrl: \"./plans.page.html\",\n    styleUrls: [\"./plans.page.scss\"],\n})\n\nexport class PlansPage implements OnInit {\n\n    segment: string = \"added\";\n    Plans: Array<any> = [];\n    name: string = \"any\";\n    loadData: string = \"any\";\n    afAuth: any;\n    afDatabase: any;\n    uid: any;\n    navCtrl: any;\n    // profess_address:any = {};\n    // pendingPlans: Array<any> = [];\n\n    plan: any = {\n        client_name: \"\",\n        client_address_line_1: \"\",\n        client_address_line_2: \"\",\n        client_city: \"\",\n        client_province: \"\",\n        client_zipcode: \"\",\n        erfno: \"\",\n        occupancy: \"\",\n        hia_sensitivity: \"\",\n        municipal: \"\",\n        professional_reg_number: \"\",\n        professional: \"\",\n        contact_email: \"\",\n        contact_phone: \"\",\n        contact_address_line_1: \"\",\n        contact_address_line_2: \"\",\n        contact_city: \"\",\n        contact_province: \"\",\n        contact_zipcode: \"\",\n        project_plan_no: \"\",\n        project_title: \"\",\n        project_cost: \"\",\n        project_area: \"\",\n        project_address_line_1: \"\",\n        project_address_line_2: \"\",\n        project_city: \"\",\n        project_province: \"\",\n        project_zipcode: \"\",\n        responsible_qs: \"\",\n        file: \"\",\n        status_request: \"No\",\n    };\n\n    saveButtonFlag: Boolean = false;\n\n    constructor(public toastController: ToastController, public authService: AuthenticateService, public restApi: RestApiService) { }\n\n    async ngOnInit() {\n        this.getplanNo();\n        this.getPlans();\n        // await this.loadSavedPlans();\n    }\n\n    ngOnDestroy() {\n        this.authService.saveData(this.plan, \"plan\");\n    }\n\n    async loadSavedPlans() {\n        let saved_plan = await this.authService.getSavedData(\"plan\");\n        // console.log( saved_plan);\n        if (saved_plan != null) {\n            this.plan = saved_plan;\n        }\n    }\n\n    submit(status_request: Boolean) {\n        for (let x in this.plan) {\n            // console.log(\" plans.page.ts  submit  this.plan[x] = : \", this.plan[x]);\n            if (this.plan[x].length == 0) {\n                let name = x.replace('_', ' ');\n                return this.restApi.toast(\"Please fill \" + name, 1200);\n            }\n        }\n        if (status_request) {\n            this.plan.status_request = \"Yes\";\n        }\n        if (/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(this.plan.contact_email) != true) { this.restApi.toast(\"Please input validated email.\", 1500); }\n        // console.log(this.plan, this.authService.user.userId);\n        this.restApi.post(\"professional/add-plan\", { user_id: this.authService.user.userId, data: this.plan }).subscribe((res: any) => {\n            console.log(res);\n            if (res && res.status == \"success\") {\n                this.restApi.toast(res.message, 1200);\n                this.segment = \"added\";\n                this.Plans = res.data;\n                for (let x in this.plan) {\n                    this.plan[x] = \"\";\n                }\n            }\n        }, error => {\n            this.restApi.toast(error.message, 1200);\n        });\n    }\n\n    async action(x: any, act: any) {\n        this.plan = x;\n        if (act) {\n            this.plan.status_request = \"Yes\";\n            this.submit(true);\n        } else {\n            this.segment = \"paper\";\n        }\n    }\n\n    getPlans() {\n        this.restApi.post(\"professional/get-plan\", { user_id: this.authService.user.userId }).subscribe((res: any) => {\n            if (res && res.status == \"success\") {\n                console.log(res.data);\n                this.Plans = res.data;\n            }\n        }, error => {\n            this.restApi.toast(\"Something went wrong.\", 1200);\n        });\n    }\n\n    getplanNo() {\n        var text = \"\";\n        var possible = \"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\";\n        for (var i = 0; i < 5; i++) {\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\n        }\n        this.plan.project_plan_no = text;\n    }\n\n    changeListener($event: any): void {\n        this.saveButtonFlag = true;\n        let file = $event.target.files[0];\n        if (file && file.type == \"application/pdf\") {\n            this.restApi.postFile(file, \"/upload-file\", \"plan\").subscribe(res => {\n                console.log(\"plan page changeListener res : \", res);\n                if (res && res.status && res.status == \"success\") {\n                    this.plan.file = res.filename;\n                }\n            }, error => {\n                console.log(error);\n            });\n        } else {\n            this.restApi.toast(\"Only PDF supported\", 1200);\n        }\n        this.saveButtonFlag = false;\n    }\n\n    download(filename: string, path: string) {\n        this.restApi.downfile(path, filename);\n    }\n}\n"],"names":[],"sourceRoot":"webpack:///"}