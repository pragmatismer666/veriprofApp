{"version":3,"file":"src_app_home_assessor_unverifiedbiz_unverifiedbiz_module_ts.js","mappings":"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","sources":["./src/app/home/assessor/unverifiedbiz/unverifiedbiz.module.ts","./src/app/home/assessor/unverifiedbiz/unverifiedbiz.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n// import { FormsModule } from '@angular/forms';\nimport { FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { UnverifiedbizPage } from './unverifiedbiz.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UnverifiedbizPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [UnverifiedbizPage]\n})\nexport class UnverifiedbizPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { RestApiService } from 'src/app/services/rest-api.service';\nimport { AuthenticateService } from 'src/app/services/authentication.service';\nimport { ToastController, AlertController } from '@ionic/angular';\nimport { Router } from '@angular/router';\n// import { AlertController } from 'ionic-angular';\n\n\n@Component({\n    selector: 'app-unverifiedbiz',\n    templateUrl: './unverifiedbiz.page.html',\n    styleUrls: ['./unverifiedbiz.page.scss'],\n})\nexport class UnverifiedbizPage implements OnInit {\n\n    objs: Array<any>;\n    schedules: Array<any>;\n    x: any;\n    action: any;\n\n    constructor(\n        public toastController: ToastController,\n        public restApi: RestApiService,\n        private router: Router,\n        public authService: AuthenticateService,\n        public alertController: AlertController,\n    ) { }\n\n    ngOnInit() {\n        this.getPending();\n    }\n\n    getPending() {\n        this.restApi.get('accessor/get-unverifyBusiness').subscribe((res: any) => {\n            if (res && res.status) {\n                console.log(res.data);\n                if (res.status == 'success') {\n                    this.objs = res.data;\n                    this.get_schedule();\n                } else {\n                    this.restApi.toast(res.message, 1200);\n                }\n            }\n        }, error => {\n            console.log(error);\n            this.restApi.toast('Something went wrong.', 1200);\n        });\n    }\n\n    updatebusiness(x:any) {\n        this.restApi.post('accessor/verify-business', { user_id: this.authService.user.userId, business_id: x.buzi_id, office_id: x.id, email: x.email }).subscribe((res: any) => {\n            if (res && res.status) {\n                if (res.status == 'success') {\n                    this.getPending();\n                }\n                this.restApi.toast(res.data, 1200);\n            }\n        }, error => {\n            this.restApi.toast('Something went wrong.', 1200);\n        });\n    }\n\n    async verify(x:any) {\n        // console.log(x);\n        let val = 0;\n        const alert = await this.alertController.create({\n            cssClass: 'my-custom-class',\n            header: 'Unverified Business Detail',\n            // message: 'Business Title : '+x.org_name+'<br>Project Type : '+x.project_type+'<br>CPD Level : '+x.cdp_level+'<br>CIPC Reg Number : '+x.cipc_reg_number+'<br>Professional : '+x.profess+'<br>Business Address1 : '+x.business_address_line_1+'<br>Business Address2 : '+x.business_address_line2+'<br>City : '+x.city+'<br>Code : '+x.code+'<br>States : '+x.province+'',\n            inputs: [{ id: 'pname', name: 'pname', type: 'checkbox', label: 'Name is ' + x.pname + '?', handler: () => { val++; }, },\n            { id: 'pcouncil', name: 'pcouncil', type: 'checkbox', label: 'Practice Council reg. No is ' + x.pcouncil + '?', handler: () => { val++; }, },\n            { name: 'pcipc_reg_no', type: 'checkbox', label: 'CIPC registration is ' + x.pcipc_reg_no + '?', handler: () => { val++; }, },\n            { name: 'ptype', type: 'checkbox', label: 'Business Type is ' + x.ptype + '?', handler: () => { val++; }, },\n            { name: 'director', type: 'checkbox', label: 'Director is ' + x.director + '?', handler: () => { val++; }, },\n            { name: 'dir_prof_regno', type: 'checkbox', label: 'Director Prof registration No is ' + x.dir_prof_regno + '?', handler: () => { val++; }, },\n            { name: 'owned', type: 'checkbox', label: '%Owned is ' + x.owned + '?', handler: () => { val++; }, },\n            { name: 'phone', type: 'checkbox', label: 'Office Phone Number is ' + x.phone + '?', handler: () => { val++; }, },\n            { name: 'email', type: 'checkbox', label: 'Office Email is ' + x.email + '?', handler: () => { val++; }, },\n            { name: 'res_prof_name', type: 'checkbox', label: 'Responsible Professional Name is ' + x.res_prof_name + '?', handler: () => { val++; }, },\n            { name: 'res_prof_reg', type: 'checkbox', label: 'Responsible Professional Reg No is ' + x.res_prof_reg + '?', handler: () => { val++; }, }\n            ],\n            buttons: [\n                {\n                    text: 'Cancel',\n                    role: 'cancel',\n                    cssClass: 'secondary'\n                }, {\n                    text: 'Okay',\n                    cssClass: 'secondary',\n                    handler: () => {\n                        if (val >= 11) { this.updatebusiness(x); }\n                        else { \n                            this.restApi.toast(\"It is not enough to verify.\", 1200);\n                        }\n                    }\n                }\n            ]\n        });\n        await alert.present();\n    }\n\n    get_schedule() {\n        console.log(this.authService.userDetails().name, this.authService.user.userId);\n        this.restApi.get('accessor/get-schedule').subscribe((res: any) => {\n            if (res) {\n                if (res.status == 'success') {\n                    this.schedules = res.data;\n                    console.log(this.schedules, this.objs);\n                    for (var j = 0; j < this.objs.length; j++) {\n                        for (var i = 0; i < this.schedules.length; i++) {\n                            if (this.schedules[i].verify_target == this.objs[j].email && new Date(this.schedules[i].date).getTime() < new Date().getTime()) {\n                                this.objs[j].status = 'Pending';\n                            }\n                        }\n                    }\n                }\n            }\n        }, error => {\n            this.restApi.toast('Something went wrong.', 1200);\n        });\n    }\n\n    schedule() {\n        this.router.navigateByUrl('home/assessor/schedules');\n    }\n}\n"],"names":[],"sourceRoot":"webpack:///"}